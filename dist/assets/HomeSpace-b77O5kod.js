import{a6 as ke,M as Ut,a7 as At,a8 as Ce,_ as se,e as x,Q as it,F as pe,f as H,a9 as Bt,j as C,o as p,x as P,v as S,l as V,s as F,m as t,z as T,I as m,p as g,k as D,q as ut,aa as Ht,E as Q,n as ae,ab as Mt,L as ct,P as xt,u as ee,r as I,T as dt,B as ft,R as Vt,ac as zt,S as Wt,U as Oe,ad as $e,X as pt,N as He,t as me,b as te,d as M,ae as jt,af as mt,ag as qt,ah as vt,W as Me,g as Ue,a as Se,y as O,ai as yt,Z as re,w as oe,aj as xe,H as Y,ak as _e,al as ve,am as Ae,an as Ve,ao as ze,ap as Kt,aq as Xt,ar as Gt,as as Jt,at as Qt,au as le,av as Yt,aw as Ke,ax as ht,ay as Xe,az as Zt,$ as ea,O as ta,aA as gt,D as _t,aB as G,aC as Te,G as X,aD as bt,V as fe,aE as aa,aF as sa,aG as wt,aH as oa,aI as Ge,aJ as la,aK as na,aL as ra,aM as ia,aN as ua,aO as ye,aP as kt,aQ as ca,aR as da,a0 as he,aS as Z,a3 as Ee,a5 as Ne,Y as be,aT as fa,aU as pa,aV as Je}from"./index-Kp9RDb7Z.js";import{E as ma,a as va}from"./el-collapse-item-C8mCRCYV.js";import{E as Le,a as We}from"./el-text-Cfn_hibQ.js";import{E as je,_ as ya}from"./NavModule.vue_vue_type_script_setup_true_lang-BliD_Cav.js";import{E as Pe}from"./el-tag-92B7-Rj5.js";import{E as ge}from"./el-skeleton-item-B4ILjdAm.js";import{e as ha,f as ga,d as _a,a as ba,u as wa,b as qe,E as De,c as ka}from"./el-col-Bh7Sgm8f.js";import{b as $a,l as Ca}from"./load-parse-OUX8iTrh.js";import{r as Qe,c as Sa,a as ne,i as Ta}from"./strings-z8hbWFRe.js";import{E as Ea}from"./el-scrollbar-CBZdfU_-.js";import{E as Ye}from"./el-message-r0NR3H7k.js";import"./castArray-Cuv5Yd-d.js";import"./_Uint8Array-BiWA577k.js";var Na=1,La=4;function Ze(o){return $a(o,Na|La)}const Pa=(o,s,e)=>Ut(o.subTree).filter(r=>{var y;return At(r)&&((y=r.type)==null?void 0:y.name)===s&&!!r.component}).map(r=>r.component.uid).map(r=>e[r]).filter(r=>!!r),Da=(o,s)=>{const e={},a=ke([]);return{children:a,addChild:y=>{e[y.uid]=y,a.value=Pa(o,s,e)},removeChild:y=>{delete e[y],a.value=a.value.filter(b=>b.uid!==y)}}},$t=Symbol("dialogInjectionKey"),Ra=(...o)=>s=>{o.forEach(e=>{Ce(e)?e(s):e.value=s})},Fa=x({name:"ElDialogContent"}),Ia=x({...Fa,props:ga,emits:ha,setup(o,{expose:s}){const e=o,{t:a}=it(),{Close:l}=Ht,{dialogRef:r,headerRef:y,bodyId:b,ns:c,style:k}=pe($t),{focusTrapRef:d}=pe(Mt),f=H(()=>[c.b(),c.is("fullscreen",e.fullscreen),c.is("draggable",e.draggable),c.is("align-center",e.alignCenter),{[c.m("center")]:e.center}]),w=Ra(d,r),i=H(()=>e.draggable),_=H(()=>e.overflow),{resetPosition:n,updatePosition:h}=Bt(r,y,i,_);return s({resetPosition:n,updatePosition:h}),(u,$)=>(p(),C("div",{ref:t(w),class:F(t(f)),style:ae(t(k)),tabindex:"-1"},[P("header",{ref_key:"headerRef",ref:y,class:F([t(c).e("header"),u.headerClass,{"show-close":u.showClose}])},[V(u.$slots,"header",{},()=>[P("span",{role:"heading","aria-level":u.ariaLevel,class:F(t(c).e("title"))},T(u.title),11,["aria-level"])]),u.showClose?(p(),C("button",{key:0,"aria-label":t(a)("el.dialog.close"),class:F(t(c).e("headerbtn")),type:"button",onClick:v=>u.$emit("close")},[m(t(Q),{class:F(t(c).e("close"))},{default:g(()=>[(p(),D(ut(u.closeIcon||t(l))))]),_:1},8,["class"])],10,["aria-label","onClick"])):S("v-if",!0)],2),P("div",{id:t(b),class:F([t(c).e("body"),u.bodyClass])},[V(u.$slots,"default")],10,["id"]),u.$slots.footer?(p(),C("footer",{key:0,class:F([t(c).e("footer"),u.footerClass])},[V(u.$slots,"footer")],2)):S("v-if",!0)],6))}});var Oa=se(Ia,[["__file","dialog-content.vue"]]);const Ua=x({name:"ElDialog",inheritAttrs:!1}),Aa=x({...Ua,props:ba,emits:_a,setup(o,{expose:s}){const e=o,a=ct();xt({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},H(()=>!!a.title));const l=ee("dialog"),r=I(),y=I(),b=I(),{visible:c,titleId:k,bodyId:d,style:f,overlayDialogStyle:w,rendered:i,zIndex:_,afterEnter:n,afterLeave:h,beforeLeave:u,handleClose:$,onModalClick:v,onOpenAutoFocus:E,onCloseAutoFocus:U,onCloseRequested:A,onFocusoutPrevented:W}=wa(e,r);He($t,{dialogRef:r,headerRef:y,bodyId:d,ns:l,rendered:i,style:f});const B=zt(v),N=H(()=>e.draggable&&!e.fullscreen);return s({visible:c,dialogContentRef:b,resetPosition:()=>{var L;(L=b.value)==null||L.resetPosition()},handleClose:$}),(L,j)=>(p(),D(t(Ea),{to:L.appendTo,disabled:L.appendTo!=="body"?!1:!L.appendToBody},{default:g(()=>[m(dt,{name:"dialog-fade",onAfterEnter:t(n),onAfterLeave:t(h),onBeforeLeave:t(u),persisted:""},{default:g(()=>[ft(m(t(Vt),{"custom-mask-event":"",mask:L.modal,"overlay-class":L.modalClass,"z-index":t(_)},{default:g(()=>[P("div",{role:"dialog","aria-modal":"true","aria-label":L.title||void 0,"aria-labelledby":L.title?void 0:t(k),"aria-describedby":t(d),class:F(`${t(l).namespace.value}-overlay-dialog`),style:ae(t(w)),onClick:t(B).onClick,onMousedown:t(B).onMousedown,onMouseup:t(B).onMouseup},[m(t(Wt),{loop:"",trapped:t(c),"focus-start-el":"container",onFocusAfterTrapped:t(E),onFocusAfterReleased:t(U),onFocusoutPrevented:t(W),onReleaseRequested:t(A)},{default:g(()=>[t(i)?(p(),D(Oa,Oe({key:0,ref_key:"dialogContentRef",ref:b},L.$attrs,{center:L.center,"align-center":L.alignCenter,"close-icon":L.closeIcon,draggable:t(N),overflow:L.overflow,fullscreen:L.fullscreen,"header-class":L.headerClass,"body-class":L.bodyClass,"footer-class":L.footerClass,"show-close":L.showClose,title:L.title,"aria-level":L.headerAriaLevel,onClose:t($)}),$e({header:g(()=>[L.$slots.title?V(L.$slots,"title",{key:1}):V(L.$slots,"header",{key:0,close:t($),titleId:t(k),titleClass:t(l).e("title")})]),default:g(()=>[V(L.$slots,"default")]),_:2},[L.$slots.footer?{name:"footer",fn:g(()=>[V(L.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):S("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[pt,t(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Ba=se(Aa,[["__file","dialog.vue"]]);const Re=me(Ba),Ha=te({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:o=>o>=0&&o<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:M(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:M([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:M(Function),default:o=>`${o}%`}}),Ma=x({name:"ElProgress"}),xa=x({...Ma,props:Ha,setup(o){const s=o,e={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},a=ee("progress"),l=H(()=>{const v={width:`${s.percentage}%`,animationDuration:`${s.duration}s`},E=$(s.percentage);return E.includes("gradient")?v.background=E:v.backgroundColor=E,v}),r=H(()=>(s.strokeWidth/s.width*100).toFixed(1)),y=H(()=>["circle","dashboard"].includes(s.type)?Number.parseInt(`${50-Number.parseFloat(r.value)/2}`,10):0),b=H(()=>{const v=y.value,E=s.type==="dashboard";return`
          M 50 50
          m 0 ${E?"":"-"}${v}
          a ${v} ${v} 0 1 1 0 ${E?"-":""}${v*2}
          a ${v} ${v} 0 1 1 0 ${E?"":"-"}${v*2}
          `}),c=H(()=>2*Math.PI*y.value),k=H(()=>s.type==="dashboard"?.75:1),d=H(()=>`${-1*c.value*(1-k.value)/2}px`),f=H(()=>({strokeDasharray:`${c.value*k.value}px, ${c.value}px`,strokeDashoffset:d.value})),w=H(()=>({strokeDasharray:`${c.value*k.value*(s.percentage/100)}px, ${c.value}px`,strokeDashoffset:d.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),i=H(()=>{let v;return s.color?v=$(s.percentage):v=e[s.status]||e.default,v}),_=H(()=>s.status==="warning"?jt:s.type==="line"?s.status==="success"?mt:qt:s.status==="success"?vt:Me),n=H(()=>s.type==="line"?12+s.strokeWidth*.4:s.width*.111111+2),h=H(()=>s.format(s.percentage));function u(v){const E=100/v.length;return v.map((A,W)=>Ue(A)?{color:A,percentage:(W+1)*E}:A).sort((A,W)=>A.percentage-W.percentage)}const $=v=>{var E;const{color:U}=s;if(Ce(U))return U(v);if(Ue(U))return U;{const A=u(U);for(const W of A)if(W.percentage>v)return W.color;return(E=A[A.length-1])==null?void 0:E.color}};return(v,E)=>(p(),C("div",{class:F([t(a).b(),t(a).m(v.type),t(a).is(v.status),{[t(a).m("without-text")]:!v.showText,[t(a).m("text-inside")]:v.textInside}]),role:"progressbar","aria-valuenow":v.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[v.type==="line"?(p(),C("div",{key:0,class:F(t(a).b("bar"))},[P("div",{class:F(t(a).be("bar","outer")),style:ae({height:`${v.strokeWidth}px`})},[P("div",{class:F([t(a).be("bar","inner"),{[t(a).bem("bar","inner","indeterminate")]:v.indeterminate},{[t(a).bem("bar","inner","striped")]:v.striped},{[t(a).bem("bar","inner","striped-flow")]:v.stripedFlow}]),style:ae(t(l))},[(v.showText||v.$slots.default)&&v.textInside?(p(),C("div",{key:0,class:F(t(a).be("bar","innerText"))},[V(v.$slots,"default",{percentage:v.percentage},()=>[P("span",null,T(t(h)),1)])],2)):S("v-if",!0)],6)],6)],2)):(p(),C("div",{key:1,class:F(t(a).b("circle")),style:ae({height:`${v.width}px`,width:`${v.width}px`})},[(p(),C("svg",{viewBox:"0 0 100 100"},[P("path",{class:F(t(a).be("circle","track")),d:t(b),stroke:`var(${t(a).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":v.strokeLinecap,"stroke-width":t(r),fill:"none",style:ae(t(f))},null,14,["d","stroke","stroke-linecap","stroke-width"]),P("path",{class:F(t(a).be("circle","path")),d:t(b),stroke:t(i),fill:"none",opacity:v.percentage?1:0,"stroke-linecap":v.strokeLinecap,"stroke-width":t(r),style:ae(t(w))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(v.showText||v.$slots.default)&&!v.textInside?(p(),C("div",{key:2,class:F(t(a).e("text")),style:ae({fontSize:`${t(n)}px`})},[V(v.$slots,"default",{percentage:v.percentage},()=>[v.status?(p(),D(t(Q),{key:1},{default:g(()=>[(p(),D(ut(t(_))))]),_:1})):(p(),C("span",{key:0},T(t(h)),1))])],6)):S("v-if",!0)],10,["aria-valuenow"]))}});var Va=se(xa,[["__file","progress.vue"]]);const za=me(Va),Wa=te({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:M([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:M([String,Object,Array])}}),ja=x({name:"ElStatistic"}),qa=x({...ja,props:Wa,setup(o,{expose:s}){const e=o,a=ee("statistic"),l=H(()=>{const{value:r,formatter:y,precision:b,decimalSeparator:c,groupSeparator:k}=e;if(Ce(y))return y(r);if(!Se(r)||Number.isNaN(r))return r;let[d,f=""]=String(r).split(".");return f=f.padEnd(b,"0").slice(0,b>0?b:0),d=d.replace(/\B(?=(\d{3})+(?!\d))/g,k),[d,f].join(f?c:"")});return s({displayValue:l}),(r,y)=>(p(),C("div",{class:F(t(a).b())},[r.$slots.title||r.title?(p(),C("div",{key:0,class:F(t(a).e("head"))},[V(r.$slots,"title",{},()=>[O(T(r.title),1)])],2)):S("v-if",!0),P("div",{class:F(t(a).e("content"))},[r.$slots.prefix||r.prefix?(p(),C("div",{key:0,class:F(t(a).e("prefix"))},[V(r.$slots,"prefix",{},()=>[P("span",null,T(r.prefix),1)])],2)):S("v-if",!0),P("span",{class:F(t(a).e("number")),style:ae(r.valueStyle)},T(t(l)),7),r.$slots.suffix||r.suffix?(p(),C("div",{key:1,class:F(t(a).e("suffix"))},[V(r.$slots,"suffix",{},()=>[P("span",null,T(r.suffix),1)])],2)):S("v-if",!0)],2)],2))}});var Ka=se(qa,[["__file","statistic.vue"]]);const Xa=me(Ka),Ga=te({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:M([Number,Object]),default:0},valueStyle:{type:M([String,Object,Array])}}),Ja={finish:()=>!0,[yt]:o=>Se(o)},Qa=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],et=o=>Se(o)?new Date(o).getTime():o.valueOf(),tt=(o,s)=>{let e=o;const a=/\[([^\]]*)]/g;return Qa.reduce((r,[y,b])=>{const c=new RegExp(`${y}+(?![^\\[\\]]*\\])`,"g");if(c.test(r)){const k=Math.floor(e/b);return e-=k*b,r.replace(c,d=>String(k).padStart(d.length,"0"))}return r},s).replace(a,"$1")},Ya=x({name:"ElCountdown"}),Za=x({...Ya,props:Ga,emits:Ja,setup(o,{expose:s,emit:e}){const a=o;let l;const r=I(0),y=H(()=>tt(r.value,a.format)),b=d=>tt(d,a.format),c=()=>{l&&(Sa(l),l=void 0)},k=()=>{const d=et(a.value),f=()=>{let w=d-Date.now();e(yt,w),w<=0?(w=0,c(),e("finish")):l=Qe(f),r.value=w};l=Qe(f)};return re(()=>{r.value=et(a.value)-Date.now(),oe(()=>[a.value,a.format],()=>{c(),k()},{immediate:!0})}),xe(()=>{c()}),s({displayValue:y}),(d,f)=>(p(),D(t(Xa),{value:r.value,title:d.title,prefix:d.prefix,suffix:d.suffix,"value-style":d.valueStyle,formatter:b},$e({_:2},[Y(d.$slots,(w,i)=>({name:i,fn:g(()=>[V(d.$slots,i)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var es=se(Za,[["__file","countdown.vue"]]);const Ct=me(es),Fe=Symbol("tabsRootContextKey"),ts=te({tabs:{type:M(Array),default:()=>_e([])}}),St="ElTabBar",as=x({name:St}),ss=x({...as,props:ts,setup(o,{expose:s}){const e=o,a=Ve(),l=pe(Fe);l||ve(St,"<el-tabs><el-tab-bar /></el-tabs>");const r=ee("tabs"),y=I(),b=I(),c=()=>{let i=0,_=0;const n=["top","bottom"].includes(l.props.tabPosition)?"width":"height",h=n==="width"?"x":"y",u=h==="x"?"left":"top";return e.tabs.every($=>{var v,E;const U=(E=(v=a.parent)==null?void 0:v.refs)==null?void 0:E[`tab-${$.uid}`];if(!U)return!1;if(!$.active)return!0;i=U[`offset${ne(u)}`],_=U[`client${ne(n)}`];const A=window.getComputedStyle(U);return n==="width"&&(_-=Number.parseFloat(A.paddingLeft)+Number.parseFloat(A.paddingRight),i+=Number.parseFloat(A.paddingLeft)),!1}),{[n]:`${_}px`,transform:`translate${ne(h)}(${i}px)`}},k=()=>b.value=c(),d=[],f=()=>{var i;d.forEach(n=>n.stop()),d.length=0;const _=(i=a.parent)==null?void 0:i.refs;if(_){for(const n in _)if(n.startsWith("tab-")){const h=_[n];h&&d.push(Ae(h,k))}}};oe(()=>e.tabs,async()=>{await ze(),k(),f()},{immediate:!0});const w=Ae(y,()=>k());return xe(()=>{d.forEach(i=>i.stop()),d.length=0,w.stop()}),s({ref:y,update:k}),(i,_)=>(p(),C("div",{ref_key:"barRef",ref:y,class:F([t(r).e("active-bar"),t(r).is(t(l).props.tabPosition)]),style:ae(b.value)},null,6))}});var os=se(ss,[["__file","tab-bar.vue"]]);const ls=te({panes:{type:M(Array),default:()=>_e([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),ns={tabClick:(o,s,e)=>e instanceof Event,tabRemove:(o,s)=>s instanceof Event},at="ElTabNav",rs=x({name:at,props:ls,emits:ns,setup(o,{expose:s,emit:e}){const a=pe(Fe);a||ve(at,"<el-tabs><tab-nav /></el-tabs>");const l=ee("tabs"),r=Kt(),y=Xt(),b=I(),c=I(),k=I(),d=I(),f=I(!1),w=I(0),i=I(!1),_=I(!0),n=H(()=>["top","bottom"].includes(a.props.tabPosition)?"width":"height"),h=H(()=>({transform:`translate${n.value==="width"?"X":"Y"}(-${w.value}px)`})),u=()=>{if(!b.value)return;const B=b.value[`offset${ne(n.value)}`],N=w.value;if(!N)return;const R=N>B?N-B:0;w.value=R},$=()=>{if(!b.value||!c.value)return;const B=c.value[`offset${ne(n.value)}`],N=b.value[`offset${ne(n.value)}`],R=w.value;if(B-R<=N)return;const L=B-R>N*2?R+N:B-N;w.value=L},v=async()=>{const B=c.value;if(!f.value||!k.value||!b.value||!B)return;await ze();const N=k.value.querySelector(".is-active");if(!N)return;const R=b.value,L=["top","bottom"].includes(a.props.tabPosition),j=N.getBoundingClientRect(),q=R.getBoundingClientRect(),J=L?B.offsetWidth-q.width:B.offsetHeight-q.height,K=w.value;let z=K;L?(j.left<q.left&&(z=K-(q.left-j.left)),j.right>q.right&&(z=K+j.right-q.right)):(j.top<q.top&&(z=K-(q.top-j.top)),j.bottom>q.bottom&&(z=K+(j.bottom-q.bottom))),z=Math.max(z,0),w.value=Math.min(z,J)},E=()=>{var B;if(!c.value||!b.value)return;o.stretch&&((B=d.value)==null||B.update());const N=c.value[`offset${ne(n.value)}`],R=b.value[`offset${ne(n.value)}`],L=w.value;R<N?(f.value=f.value||{},f.value.prev=L,f.value.next=L+R<N,N-L<R&&(w.value=N-R)):(f.value=!1,L>0&&(w.value=0))},U=B=>{let N=0;switch(B.code){case le.left:case le.up:N=-1;break;case le.right:case le.down:N=1;break;default:return}const R=Array.from(B.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let j=R.indexOf(B.target)+N;j<0?j=R.length-1:j>=R.length&&(j=0),R[j].focus({preventScroll:!0}),R[j].click(),A()},A=()=>{_.value&&(i.value=!0)},W=()=>i.value=!1;return oe(r,B=>{B==="hidden"?_.value=!1:B==="visible"&&setTimeout(()=>_.value=!0,50)}),oe(y,B=>{B?setTimeout(()=>_.value=!0,50):_.value=!1}),Ae(k,E),re(()=>setTimeout(()=>v(),0)),Gt(()=>E()),s({scrollToActiveTab:v,removeFocus:W}),()=>{const B=f.value?[m("span",{class:[l.e("nav-prev"),l.is("disabled",!f.value.prev)],onClick:u},[m(Q,null,{default:()=>[m(Jt,null,null)]})]),m("span",{class:[l.e("nav-next"),l.is("disabled",!f.value.next)],onClick:$},[m(Q,null,{default:()=>[m(Qt,null,null)]})])]:null,N=o.panes.map((R,L)=>{var j,q,J,K;const z=R.uid,ue=R.props.disabled,ce=(q=(j=R.props.name)!=null?j:R.index)!=null?q:`${L}`,de=!ue&&(R.isClosable||o.editable);R.index=`${L}`;const we=de?m(Q,{class:"is-icon-close",onClick:ie=>e("tabRemove",R,ie)},{default:()=>[m(Me,null,null)]}):null,It=((K=(J=R.slots).label)==null?void 0:K.call(J))||R.props.label,Ot=!ue&&R.active?0:-1;return m("div",{ref:`tab-${z}`,class:[l.e("item"),l.is(a.props.tabPosition),l.is("active",R.active),l.is("disabled",ue),l.is("closable",de),l.is("focus",i.value)],id:`tab-${ce}`,key:`tab-${z}`,"aria-controls":`pane-${ce}`,role:"tab","aria-selected":R.active,tabindex:Ot,onFocus:()=>A(),onBlur:()=>W(),onClick:ie=>{W(),e("tabClick",R,ce,ie)},onKeydown:ie=>{de&&(ie.code===le.delete||ie.code===le.backspace)&&e("tabRemove",R,ie)}},[It,we])});return m("div",{ref:k,class:[l.e("nav-wrap"),l.is("scrollable",!!f.value),l.is(a.props.tabPosition)]},[B,m("div",{class:l.e("nav-scroll"),ref:b},[m("div",{class:[l.e("nav"),l.is(a.props.tabPosition),l.is("stretch",o.stretch&&["top","bottom"].includes(a.props.tabPosition))],ref:c,style:h.value,role:"tablist",onKeydown:U},[o.type?null:m(os,{ref:d,tabs:[...o.panes]},null),N])])])}}}),is=te({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:M(Function),default:()=>!0},stretch:Boolean}),Ie=o=>Ue(o)||Se(o),us={[ht]:o=>Ie(o),tabClick:(o,s)=>s instanceof Event,tabChange:o=>Ie(o),edit:(o,s)=>["remove","add"].includes(s),tabRemove:o=>Ie(o),tabAdd:()=>!0},cs=x({name:"ElTabs",props:is,emits:us,setup(o,{emit:s,slots:e,expose:a}){var l;const r=ee("tabs"),y=H(()=>["left","right"].includes(o.tabPosition)),{children:b,addChild:c,removeChild:k}=Da(Ve(),"ElTabPane"),d=I(),f=I((l=o.modelValue)!=null?l:"0"),w=async(u,$=!1)=>{var v,E;if(!(f.value===u||Ke(u)))try{let U;if(o.beforeLeave){const A=o.beforeLeave(u,f.value);U=A instanceof Promise?await A:A}else U=!0;U!==!1&&(f.value=u,$&&(s(ht,u),s("tabChange",u)),(E=(v=d.value)==null?void 0:v.removeFocus)==null||E.call(v))}catch{}},i=(u,$,v)=>{u.props.disabled||(s("tabClick",u,v),w($,!0))},_=(u,$)=>{u.props.disabled||Ke(u.props.name)||($.stopPropagation(),s("edit",u.props.name,"remove"),s("tabRemove",u.props.name))},n=()=>{s("edit",void 0,"add"),s("tabAdd")};oe(()=>o.modelValue,u=>w(u)),oe(f,async()=>{var u;await ze(),(u=d.value)==null||u.scrollToActiveTab()}),He(Fe,{props:o,currentName:f,registerPane:u=>{b.value.push(u)},sortPane:c,unregisterPane:k}),a({currentName:f});const h=({render:u})=>u();return()=>{const u=e["add-icon"],$=o.editable||o.addable?m("div",{class:[r.e("new-tab"),y.value&&r.e("new-tab-vertical")],tabindex:"0",onClick:n,onKeydown:U=>{[le.enter,le.numpadEnter].includes(U.code)&&n()}},[u?V(e,"add-icon"):m(Q,{class:r.is("icon-plus")},{default:()=>[m(Yt,null,null)]})]):null,v=m("div",{class:[r.e("header"),y.value&&r.e("header-vertical"),r.is(o.tabPosition)]},[m(h,{render:()=>{const U=b.value.some(A=>A.slots.label);return m(rs,{ref:d,currentName:f.value,editable:o.editable,type:o.type,panes:b.value,stretch:o.stretch,onTabClick:i,onTabRemove:_},{$stable:!U})}},null),$]),E=m("div",{class:r.e("content")},[V(e,"default")]);return m("div",{class:[r.b(),r.m(o.tabPosition),{[r.m("card")]:o.type==="card",[r.m("border-card")]:o.type==="border-card"}]},[E,v])}}});var ds=cs;const fs=te({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Tt="ElTabPane",ps=x({name:Tt}),ms=x({...ps,props:fs,setup(o){const s=o,e=Ve(),a=ct(),l=pe(Fe);l||ve(Tt,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const r=ee("tab-pane"),y=I(),b=H(()=>s.closable||l.props.closable),c=Xe(()=>{var i;return l.currentName.value===((i=s.name)!=null?i:y.value)}),k=I(c.value),d=H(()=>{var i;return(i=s.name)!=null?i:y.value}),f=Xe(()=>!s.lazy||k.value||c.value);oe(c,i=>{i&&(k.value=!0)});const w=Zt({uid:e.uid,slots:a,props:s,paneName:d,active:c,index:y,isClosable:b});return l.registerPane(w),re(()=>{l.sortPane(w)}),ea(()=>{l.unregisterPane(w.uid)}),(i,_)=>t(f)?ft((p(),C("div",{key:0,id:`pane-${t(d)}`,class:F(t(r).b()),role:"tabpanel","aria-hidden":!t(c),"aria-labelledby":`tab-${t(d)}`},[V(i.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[pt,t(c)]]):S("v-if",!0)}});var Et=se(ms,[["__file","tab-pane.vue"]]);const vs=me(ds,{TabPane:Et}),ys=ta(Et),Nt=Symbol("uploadContextKey"),hs="ElUpload";class gs extends Error{constructor(s,e,a,l){super(s),this.name="UploadAjaxError",this.status=e,this.method=a,this.url=l}}function st(o,s,e){let a;return e.response?a=`${e.response.error||e.response}`:e.responseText?a=`${e.responseText}`:a=`fail to ${s.method} ${o} ${e.status}`,new gs(a,e.status,s.method,o)}function _s(o){const s=o.responseText||o.response;if(!s)return s;try{return JSON.parse(s)}catch{return s}}const bs=o=>{typeof XMLHttpRequest>"u"&&ve(hs,"XMLHttpRequest is undefined");const s=new XMLHttpRequest,e=o.action;s.upload&&s.upload.addEventListener("progress",r=>{const y=r;y.percent=r.total>0?r.loaded/r.total*100:0,o.onProgress(y)});const a=new FormData;if(o.data)for(const[r,y]of Object.entries(o.data))gt(y)&&y.length?a.append(r,...y):a.append(r,y);a.append(o.filename,o.file,o.file.name),s.addEventListener("error",()=>{o.onError(st(e,o,s))}),s.addEventListener("load",()=>{if(s.status<200||s.status>=300)return o.onError(st(e,o,s));o.onSuccess(_s(s))}),s.open(o.method,e,!0),o.withCredentials&&"withCredentials"in s&&(s.withCredentials=!0);const l=o.headers||{};if(l instanceof Headers)l.forEach((r,y)=>s.setRequestHeader(y,r));else for(const[r,y]of Object.entries(l))_t(y)||s.setRequestHeader(r,String(y));return s.send(a),s},Lt=["text","picture","picture-card"];let ws=1;const Be=()=>Date.now()+ws++,Pt=te({action:{type:String,default:"#"},headers:{type:M(Object)},method:{type:String,default:"post"},data:{type:M([Object,Function,Promise]),default:()=>_e({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:M(Array),default:()=>_e([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Lt,default:"text"},httpRequest:{type:M(Function),default:bs},disabled:Boolean,limit:Number}),ks=te({...Pt,beforeUpload:{type:M(Function),default:G},beforeRemove:{type:M(Function)},onRemove:{type:M(Function),default:G},onChange:{type:M(Function),default:G},onPreview:{type:M(Function),default:G},onSuccess:{type:M(Function),default:G},onProgress:{type:M(Function),default:G},onError:{type:M(Function),default:G},onExceed:{type:M(Function),default:G},crossorigin:{type:M(String)}}),$s=te({files:{type:M(Array),default:()=>_e([])},disabled:{type:Boolean,default:!1},handlePreview:{type:M(Function),default:G},listType:{type:String,values:Lt,default:"text"},crossorigin:{type:M(String)}}),Cs={remove:o=>!!o},Ss=x({name:"ElUploadList"}),Ts=x({...Ss,props:$s,emits:Cs,setup(o,{emit:s}){const e=o,{t:a}=it(),l=ee("upload"),r=ee("icon"),y=ee("list"),b=Te(),c=I(!1),k=H(()=>[l.b("list"),l.bm("list",e.listType),l.is("disabled",e.disabled)]),d=f=>{s("remove",f)};return(f,w)=>(p(),D(oa,{tag:"ul",class:F(t(k)),name:t(y).b()},{default:g(()=>[(p(!0),C(X,null,Y(f.files,(i,_)=>(p(),C("li",{key:i.uid||i.name,class:F([t(l).be("list","item"),t(l).is(i.status),{focusing:c.value}]),tabindex:"0",onKeydown:bt(n=>!t(b)&&d(i),["delete"]),onFocus:n=>c.value=!0,onBlur:n=>c.value=!1,onClick:n=>c.value=!1},[V(f.$slots,"default",{file:i,index:_},()=>[f.listType==="picture"||i.status!=="uploading"&&f.listType==="picture-card"?(p(),C("img",{key:0,class:F(t(l).be("list","item-thumbnail")),src:i.url,crossorigin:f.crossorigin,alt:""},null,10,["src","crossorigin"])):S("v-if",!0),i.status==="uploading"||f.listType!=="picture-card"?(p(),C("div",{key:1,class:F(t(l).be("list","item-info"))},[P("a",{class:F(t(l).be("list","item-name")),onClick:fe(n=>f.handlePreview(i),["prevent"])},[m(t(Q),{class:F(t(r).m("document"))},{default:g(()=>[m(t(aa))]),_:1},8,["class"]),P("span",{class:F(t(l).be("list","item-file-name")),title:i.name},T(i.name),11,["title"])],10,["onClick"]),i.status==="uploading"?(p(),D(t(za),{key:0,type:f.listType==="picture-card"?"circle":"line","stroke-width":f.listType==="picture-card"?6:2,percentage:Number(i.percentage),style:ae(f.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):S("v-if",!0)],2)):S("v-if",!0),P("label",{class:F(t(l).be("list","item-status-label"))},[f.listType==="text"?(p(),D(t(Q),{key:0,class:F([t(r).m("upload-success"),t(r).m("circle-check")])},{default:g(()=>[m(t(mt))]),_:1},8,["class"])):["picture-card","picture"].includes(f.listType)?(p(),D(t(Q),{key:1,class:F([t(r).m("upload-success"),t(r).m("check")])},{default:g(()=>[m(t(vt))]),_:1},8,["class"])):S("v-if",!0)],2),t(b)?S("v-if",!0):(p(),D(t(Q),{key:2,class:F(t(r).m("close")),onClick:n=>d(i)},{default:g(()=>[m(t(Me))]),_:2},1032,["class","onClick"])),S(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),S(" This is a bug which needs to be fixed "),S(" TODO: Fix the incorrect navigation interaction "),t(b)?S("v-if",!0):(p(),C("i",{key:3,class:F(t(r).m("close-tip"))},T(t(a)("el.upload.deleteTip")),3)),f.listType==="picture-card"?(p(),C("span",{key:4,class:F(t(l).be("list","item-actions"))},[P("span",{class:F(t(l).be("list","item-preview")),onClick:n=>f.handlePreview(i)},[m(t(Q),{class:F(t(r).m("zoom-in"))},{default:g(()=>[m(t(sa))]),_:1},8,["class"])],10,["onClick"]),t(b)?S("v-if",!0):(p(),C("span",{key:0,class:F(t(l).be("list","item-delete")),onClick:n=>d(i)},[m(t(Q),{class:F(t(r).m("delete"))},{default:g(()=>[m(t(wt))]),_:1},8,["class"])],10,["onClick"]))],2)):S("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),V(f.$slots,"append")]),_:3},8,["class","name"]))}});var ot=se(Ts,[["__file","upload-list.vue"]]);const Es=te({disabled:{type:Boolean,default:!1}}),Ns={file:o=>gt(o)},Dt="ElUploadDrag",Ls=x({name:Dt}),Ps=x({...Ls,props:Es,emits:Ns,setup(o,{emit:s}){pe(Nt)||ve(Dt,"usage: <el-upload><el-upload-dragger /></el-upload>");const a=ee("upload"),l=I(!1),r=Te(),y=c=>{if(r.value)return;l.value=!1,c.stopPropagation();const k=Array.from(c.dataTransfer.files),d=c.dataTransfer.items||[];k.forEach((f,w)=>{var i;const _=d[w],n=(i=_==null?void 0:_.webkitGetAsEntry)==null?void 0:i.call(_);n&&(f.isDirectory=n.isDirectory)}),s("file",k)},b=()=>{r.value||(l.value=!0)};return(c,k)=>(p(),C("div",{class:F([t(a).b("dragger"),t(a).is("dragover",l.value)]),onDrop:fe(y,["prevent"]),onDragover:fe(b,["prevent"]),onDragleave:fe(d=>l.value=!1,["prevent"])},[V(c.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Ds=se(Ps,[["__file","upload-dragger.vue"]]);const Rs=te({...Pt,beforeUpload:{type:M(Function),default:G},onRemove:{type:M(Function),default:G},onStart:{type:M(Function),default:G},onSuccess:{type:M(Function),default:G},onProgress:{type:M(Function),default:G},onError:{type:M(Function),default:G},onExceed:{type:M(Function),default:G}}),Fs=x({name:"ElUploadContent",inheritAttrs:!1}),Is=x({...Fs,props:Rs,setup(o,{expose:s}){const e=o,a=ee("upload"),l=Te(),r=ke({}),y=ke(),b=n=>{if(n.length===0)return;const{autoUpload:h,limit:u,fileList:$,multiple:v,onStart:E,onExceed:U}=e;if(u&&$.length+n.length>u){U(n,$);return}v||(n=n.slice(0,1));for(const A of n){const W=A;W.uid=Be(),E(W),h&&c(W)}},c=async n=>{if(y.value.value="",!e.beforeUpload)return d(n);let h,u={};try{const v=e.data,E=e.beforeUpload(n);u=Ge(e.data)?Ze(e.data):e.data,h=await E,Ge(e.data)&&Ta(v,u)&&(u=Ze(e.data))}catch{h=!1}if(h===!1){e.onRemove(n);return}let $=n;h instanceof Blob&&(h instanceof File?$=h:$=new File([h],n.name,{type:n.type})),d(Object.assign($,{uid:n.uid}),u)},k=async(n,h)=>Ce(n)?n(h):n,d=async(n,h)=>{const{headers:u,data:$,method:v,withCredentials:E,name:U,action:A,onProgress:W,onSuccess:B,onError:N,httpRequest:R}=e;try{h=await k(h??$,n)}catch{e.onRemove(n);return}const{uid:L}=n,j={headers:u||{},withCredentials:E,file:n,data:h,method:v,filename:U,action:A,onProgress:J=>{W(J,n)},onSuccess:J=>{B(J,n),delete r.value[L]},onError:J=>{N(J,n),delete r.value[L]}},q=R(j);r.value[L]=q,q instanceof Promise&&q.then(j.onSuccess,j.onError)},f=n=>{const h=n.target.files;h&&b(Array.from(h))},w=()=>{l.value||(y.value.value="",y.value.click())},i=()=>{w()};return s({abort:n=>{la(r.value).filter(n?([u])=>String(n.uid)===u:()=>!0).forEach(([u,$])=>{$ instanceof XMLHttpRequest&&$.abort(),delete r.value[u]})},upload:c}),(n,h)=>(p(),C("div",{class:F([t(a).b(),t(a).m(n.listType),t(a).is("drag",n.drag),t(a).is("disabled",t(l))]),tabindex:t(l)?"-1":"0",onClick:w,onKeydown:bt(fe(i,["self"]),["enter","space"])},[n.drag?(p(),D(Ds,{key:0,disabled:t(l),onFile:b},{default:g(()=>[V(n.$slots,"default")]),_:3},8,["disabled"])):V(n.$slots,"default",{key:1}),P("input",{ref_key:"inputRef",ref:y,class:F(t(a).e("input")),name:n.name,disabled:t(l),multiple:n.multiple,accept:n.accept,type:"file",onChange:f,onClick:fe(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var lt=se(Is,[["__file","upload-content.vue"]]);const nt="ElUpload",rt=o=>{var s;(s=o.url)!=null&&s.startsWith("blob:")&&URL.revokeObjectURL(o.url)},Os=(o,s)=>{const e=na(o,"fileList",void 0,{passive:!0}),a=i=>e.value.find(_=>_.uid===i.uid);function l(i){var _;(_=s.value)==null||_.abort(i)}function r(i=["ready","uploading","success","fail"]){e.value=e.value.filter(_=>!i.includes(_.status))}function y(i){e.value=e.value.filter(_=>_.uid!==i.uid)}const b=(i,_)=>{const n=a(_);n&&(console.error(i),n.status="fail",y(n),o.onError(i,n,e.value),o.onChange(n,e.value))},c=(i,_)=>{const n=a(_);n&&(o.onProgress(i,n,e.value),n.status="uploading",n.percentage=Math.round(i.percent))},k=(i,_)=>{const n=a(_);n&&(n.status="success",n.response=i,o.onSuccess(i,n,e.value),o.onChange(n,e.value))},d=i=>{_t(i.uid)&&(i.uid=Be());const _={name:i.name,percentage:0,status:"ready",size:i.size,raw:i,uid:i.uid};if(o.listType==="picture-card"||o.listType==="picture")try{_.url=URL.createObjectURL(i)}catch(n){ra(nt,n.message),o.onError(n,_,e.value)}e.value=[...e.value,_],o.onChange(_,e.value)},f=async i=>{const _=i instanceof File?a(i):i;_||ve(nt,"file to be removed not found");const n=h=>{l(h),y(h),o.onRemove(h,e.value),rt(h)};o.beforeRemove?await o.beforeRemove(_,e.value)!==!1&&n(_):n(_)};function w(){e.value.filter(({status:i})=>i==="ready").forEach(({raw:i})=>{var _;return i&&((_=s.value)==null?void 0:_.upload(i))})}return oe(()=>o.listType,i=>{i!=="picture-card"&&i!=="picture"||(e.value=e.value.map(_=>{const{raw:n,url:h}=_;if(!h&&n)try{_.url=URL.createObjectURL(n)}catch(u){o.onError(u,_,e.value)}return _}))}),oe(e,i=>{for(const _ of i)_.uid||(_.uid=Be()),_.status||(_.status="success")},{immediate:!0,deep:!0}),{uploadFiles:e,abort:l,clearFiles:r,handleError:b,handleProgress:c,handleStart:d,handleSuccess:k,handleRemove:f,submit:w,revokeFileObjectURL:rt}},Us=x({name:"ElUpload"}),As=x({...Us,props:ks,setup(o,{expose:s}){const e=o,a=Te(),l=ke(),{abort:r,submit:y,clearFiles:b,uploadFiles:c,handleStart:k,handleError:d,handleRemove:f,handleSuccess:w,handleProgress:i,revokeFileObjectURL:_}=Os(e,l),n=H(()=>e.listType==="picture-card"),h=H(()=>({...e,fileList:c.value,onStart:k,onProgress:i,onSuccess:w,onError:d,onRemove:f}));return xe(()=>{c.value.forEach(_)}),He(Nt,{accept:ia(e,"accept")}),s({abort:r,submit:y,clearFiles:b,handleStart:k,handleRemove:f}),(u,$)=>(p(),C("div",null,[t(n)&&u.showFileList?(p(),D(ot,{key:0,disabled:t(a),"list-type":u.listType,files:t(c),crossorigin:u.crossorigin,"handle-preview":u.onPreview,onRemove:t(f)},$e({append:g(()=>[m(lt,Oe({ref_key:"uploadRef",ref:l},t(h)),{default:g(()=>[u.$slots.trigger?V(u.$slots,"trigger",{key:0}):S("v-if",!0),!u.$slots.trigger&&u.$slots.default?V(u.$slots,"default",{key:1}):S("v-if",!0)]),_:3},16)]),_:2},[u.$slots.file?{name:"default",fn:g(({file:v,index:E})=>[V(u.$slots,"file",{file:v,index:E})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):S("v-if",!0),!t(n)||t(n)&&!u.showFileList?(p(),D(lt,Oe({key:1,ref_key:"uploadRef",ref:l},t(h)),{default:g(()=>[u.$slots.trigger?V(u.$slots,"trigger",{key:0}):S("v-if",!0),!u.$slots.trigger&&u.$slots.default?V(u.$slots,"default",{key:1}):S("v-if",!0)]),_:3},16)):S("v-if",!0),u.$slots.trigger?V(u.$slots,"default",{key:2}):S("v-if",!0),V(u.$slots,"tip"),!t(n)&&u.showFileList?(p(),D(ot,{key:3,disabled:t(a),"list-type":u.listType,files:t(c),crossorigin:u.crossorigin,"handle-preview":u.onPreview,onRemove:t(f)},$e({_:2},[u.$slots.file?{name:"default",fn:g(({file:v,index:E})=>[V(u.$slots,"file",{file:v,index:E})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):S("v-if",!0)]))}});var Bs=se(As,[["__file","upload.vue"]]);const Hs=me(Bs),Ms=async o=>{try{const s=(await ua.get(`/course/get_stu_course_sched.action?id=00000&dateStr=${o}`)).data;if(!s.result)throw s;return s.result.map(a=>({id:a.id,uuid:a.uuid,courseId:a.courseId,courseName:a.courseName,courseType:a.courseType,weekDay:a.weekDay,courseNum:a.courseNum,semesterId:a.semesterId,semesterName:a.semesterName,teacherId:a.teacherId,teacherName:a.teacherName,teacherPicUrl:a.teacherPicUrl,teacherAcademy:a.teacherAcademy,classroomId:a.classroomId,classroomUuid:a.classroomUuid,classroomName:a.classroomName,classroomLongitude:a.classroomLongitude,classroomLatitude:a.classroomLatitude,teachBuildId:a.teachBuildId,teachBuildUuid:a.teachBuildUuid,teachBuildName:a.teachBuildName,storeyId:a.storeyId,storeyName:a.storeyName,teachTime:a.teachTime,signStatus:a.signStatus,classBeginTime:a.classBeginTime,classEndTime:a.classEndTime}))}catch(s){return console.log(s),[]}},xs=async(o,s=0,e=1,a=10)=>{try{return(await ye.get("/back/coursePlatform/homeWork.shtml",{params:{method:"getHomeWorkList",cId:o,subType:s,page:e,pagesize:a}})).data}catch(l){throw console.error("获取作业列表失败:",l),new Error("作业信息获取失败，请稍后重试")}},Vs=async(o,s=0)=>{const e=await xs(o,s,1,999999);if(!(e!=null&&e.courseNoteList)||e.courseNoteList.length===0)return[];const a=[];for(const l of e.courseNoteList){const r=l.makeup_flag==="1"?l.makeup_time:null,y=new Date<new Date(l.end_time)?0:new Date<new Date(l.makeup_time)?1:2,b={id:l.id,title:l.title,content:l.content,create_date:l.create_date,end_time:l.end_time,open_date:l.open_date,full_score:l.score,course_id:l.course_id,course_name:l.course_name,subStatus:y,status:l.snId?1:0,submitCount:l.submitCount,allCount:l.allCount,is_repeat:l.is_repeat,refAnswer:l.refAnswer,makeup_time:r,subType:s,detail:{my_homework:l.snId}};a.push(b)}return a},zs=async(o,s)=>{const e=[];let a=0;const l=async()=>{for(;a<s.length;){const y=a++,b=s[y],c=await b();e[y]=c}},r=Array.from({length:o},l);return await Promise.all(r),e},Ws=async o=>{const s=o.flatMap(a=>Array.from({length:3},(l,r)=>()=>Vs(a,r)));return(await zs(3,s)).flat()},js=async(o,s=1,e=100)=>{var a;try{const l=await ye.get("/back/coursePlatform/homeWork.shtml",{params:{method:"getHomeWorkDetailList",id:o,page:s,pagesize:e}});switch((a=l.data)==null?void 0:a.STATUS){case"0":return l.data;case"2":case"4":return{...l.data,message:l.data.message||"无提交记录"};default:throw new Error("未知响应状态")}}catch(l){throw console.error("获取学生提交列表失败:",l),new Error("获取提交记录失败，请检查作业ID是否正确")}},qs=async o=>{let s=1,e=1;const a=[];for(;s<=e;){const l=await js(o,s,100);l.STATUS==="0"&&(l.courseNoteList.forEach(r=>{r.score=isNaN(Number(r.score))?null:Number(r.score)}),a.push(...l.courseNoteList),e=l.totalPage),s++}return a},Ks=async o=>{try{const s=await ye.get("/back/coursePlatform/homeWork.shtml",{params:{method:"queryStudentCourseNote",id:o,courseId:"666",teacherId:"666"}});if(s.data.STATUS!=="0")throw s.data.message||"作业详情获取失败";const e=(s.data.homeWork.end_time,s.data.homeWork);return{id:e.id,create_date:e.create_date,title:e.title,content:e.content,FileList:s.data.picList}}catch(s){throw console.error("获取作业详情失败:",s),new Error("作业详情获取失败，请稍后重试")}},Rt=async(o,s,e)=>{try{const l=(await ye.get("/back/course/courseWorkInfo.shtml",{params:{method:"piGaiDiv",id:o,upId:s,uLevel:e}})).data,r=Ca(l),y=[],b=r(".commentItem .homeworkContent").text();return r(".markContentLeft .homeworkContent").each((k,d)=>{const f=r(d).attr("onclick");if(f){const w=f.match(/downloadFile\('([^']+)','([^']+)','([^']+)'/);if(w&&w.length===4){const i={id:w[3]?Number(w[3]):0,url:"api//downloadZyFj.shtml?path="+w[1]+"&filename="+w[2]+"&id="+w[3],file_name:w[2],convert_url:w[1].replace("http://123.121.147.7:88/ve/pdf/",""),pic_size:0};y.push(i)}}}),console.log("downloadParams",{id:o,create_date:"",title:"",content:b,FileList:y}),{id:o,create_date:"",title:"",content:b,FileList:y}}catch(a){throw console.error("获取作业详情失败:",a),new Error("作业详情获取失败，请稍后重试")}};async function Xs(o){var s;try{const e=await ye.post("/back/course/courseWorkInfo.shtml",new URLSearchParams(o).toString(),{params:{method:"sendStuHomeWorks"},headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"}});if(((s=e==null?void 0:e.data)==null?void 0:s.flag)!=="success")throw new Error(kt(e.data)||"作业提交失败，服务器返回异常状态");return e.data}catch(e){throw new Error(`提交作业失败: ${e instanceof Error?e.message:String(e)}`)}}async function Gs(o){var s;try{const e=new URLSearchParams;e.append("workId",o.toString());const a=await ye.post("/back/course/courseWorkInfo.shtml",e.toString(),{params:{method:"delHomeWork"},headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"}});if(((s=a==null?void 0:a.data)==null?void 0:s.flag)!=="success")throw new Error(kt(a.data)||"作业删除失败");return a.data}catch(e){throw new Error(`删除作业失败: ${e instanceof Error?e.message:String(e)}`)}}const Js={key:0},Qs={key:1,style:{display:"flex","flex-direction":"column"}},Ys=x({__name:"AddHwPanel",props:{hwid:{type:Number,required:!0,default:"0"},courseId:{type:String,default:"0"}},setup(o){const s=o,e=I(!1),a=I({content:"",groupName:"",groupId:"",courseId:s.courseId,contentType:"0",fz:"0",jxrl_id:"",fileList:"",upId:`${s.hwid}`,return_num:"0",isTeacher:"0"}),l=I([]),r=I([]),y=(d,f)=>{if(console.log("fileList",l.value),d.STATUS==="0"&&d.fileNameNoExt&&d.fileExtName&&d.fileSize&&d.visitName)Z({title:"文件上传成功",message:`文件 ${decodeURIComponent(d.fileNameNoExt)}.${d.fileExtName} 上传成功!`,type:"success"}),l.value.push({fileNameNoExt:d.fileNameNoExt,fileExtName:d.fileExtName,fileSize:d.fileSize,visitName:d.visitName,pid:"",ftype:"insert"}),a.value.fileList=JSON.stringify(l.value);else{const w=new Error("上传失败");b(w,f)}},b=(d,f)=>{f.status="fail",Z({title:"文件上传失败",message:d.message||"服务器返回异常状态",type:"error"}),r.value=r.value.filter(w=>w!==f)},c=d=>{const f=l.value.findIndex(w=>w.fileNameNoExt===d.name);f!==-1&&(l.value.splice(f,1),a.value.fileList=JSON.stringify(l.value.map(w=>({...w,ftype:"delete"}))))},k=async()=>{try{a.value.fileList||(a.value.fileList="[]");const d=await Xs(a.value);Z({title:"作业提交成功",message:"作业已成功提交！",type:"success"}),Ee.emit("UPDATE_HOMEWORKS")}catch(d){console.error("作业提交失败:",d),Z({title:"作业提交失败",message:"提交作业时发生错误，请重试。",type:"error"})}};return(d,f)=>{const w=ge,i=ca,_=Q,n=Hs,h=he;return e.value?(p(),C("div",Js,[m(w,{rows:6,animated:"",class:"skeleton-header"})])):(p(),C("div",Qs,[m(i,{modelValue:a.value.content,"onUpdate:modelValue":f[0]||(f[0]=u=>a.value.content=u),type:"textarea",placeholder:"请输入作业内容",rows:4,style:{"margin-bottom":"20px"}},null,8,["modelValue"]),m(n,{drag:"",action:"/api/back/rp/common/rpUpload.shtml","on-success":y,"on-remove":c,"file-list":r.value,"onUpdate:fileList":f[1]||(f[1]=u=>r.value=u),"auto-upload":!0,"list-type":"text",multiple:""},{tip:g(()=>f[2]||(f[2]=[P("div",{class:"el-upload__tip"}," files with a size less than 100m ",-1)])),default:g(()=>[m(_,{class:"el-icon--upload"},{default:g(()=>[m(t(da))]),_:1}),f[3]||(f[3]=P("div",{class:"el-upload__text"},[O(" Drop file here or "),P("em",null,"click to upload")],-1))]),_:1},8,["file-list"]),m(h,{type:"primary",onClick:k,round:""},{default:g(()=>f[4]||(f[4]=[O("提交作业")])),_:1})]))}}}),Zs={class:"title"},eo={key:1},to=x({__name:"PublicHwPanel",props:{activehomework:{type:Object,required:!0}},setup(o){const s=o,e=H(()=>s.activehomework),a=I(!1),l=H(()=>{const b=Date.now(),c=new Date(e.value.end_time).getTime(),k=e.value.makeup_time?new Date(e.value.makeup_time).getTime():c;return b<c?c:k}),r=I(e.value.status===0&&e.value.subStatus===0),y=H(()=>e.value.status==0?e.value.subStatus==0?{text:"⏰待提交",type:"warning"}:e.value.subStatus==1?{text:"⏰待补",type:"danger"}:{text:"⏰过期",type:"danger"}:e.value.status==1?{text:"✅已完成",type:"success"}:{text:"✅已批改",type:"success"});return Ee.on("UPDATE_HOMEWORKS",()=>{a.value=!1,r.value=e.value.status===0&&e.value.subStatus===0}),(b,c)=>{const k=qe,d=Pe,f=Ct,w=je,i=he,_=Le,n=We,h=De,u=Re;return p(),C(X,null,[m(_,{gutter:20,style:{width:"100%"}},{default:g(()=>[m(k,{class:"course_name"},{default:g(()=>[O(T(e.value.course_name)+" "+T(["作业","报告","实验"][e.value.subType]),1)]),_:1}),m(k,{xs:24,sm:16,md:16},{default:g(()=>[P("h3",Zs,T(e.value.title),1),m(w,{wrap:""},{default:g(()=>[m(d,{type:"info"},{default:g(()=>[O("📅"+T(e.value.create_date.split(" ")[0]),1)]),_:1}),m(d,{type:"info"},{default:g(()=>[O("🚫"+T(e.value.end_time.split(" ")[0]),1)]),_:1}),m(d,null,{default:g(()=>[O("👥已完成:"+T(e.value.submitCount)+"/"+T(e.value.allCount),1)]),_:1}),e.value.status==0&&e.value.subStatus!=2?(p(),D(d,{key:0,type:"danger"},{default:g(()=>[m(f,{style:{display:"inline-block",verticalAlign:"middle",marginLeft:"4px"},"value-style":"color: #666; font-size: 14px; font-weight: 700; height:100%; display:flex ",format:"⏳DD[天] HH:mm:ss",value:l.value},null,8,["value"])]),_:1})):S("",!0),e.value.detail&&e.value.detail.score?(p(),D(d,{key:1,type:"success"},{default:g(()=>[O(" ✍️分数:"+T(e.value.detail.score)+"/"+T(e.value.full_score),1)]),_:1})):S("",!0),e.value.detail&&e.value.detail.rank?(p(),D(d,{key:2,type:"info"},{default:g(()=>[O(" rank:"+T(e.value.detail.rank)+"/"+T(e.value.submitCount),1)]),_:1})):S("",!0)]),_:1})]),_:1}),m(k,{xs:24,sm:8,md:8},{default:g(()=>[m(i,{round:"",style:{width:"100%"},class:F(["a-card",y.value.type]),onClick:c[0]||(c[0]=$=>a.value=!0)},{default:g(()=>[O(T(y.value.text),1)]),_:1},8,["class"])]),_:1})]),_:1}),e.value?(p(),D(u,{key:0,"align-center":"",modelValue:a.value,"onUpdate:modelValue":c[2]||(c[2]=$=>a.value=$),width:"90%",title:e.value.title,"destroy-on-close":"","append-to-body":"",style:{"border-radius":"12px"}},{default:g(()=>[r.value?(p(),D(Ys,{key:0,hwid:e.value.id,courseId:`${e.value.course_id}`},null,8,["hwid","courseId"])):(p(),C("div",eo,[e.value.status==1?(p(),D(n,{key:0},{default:g(()=>c[3]||(c[3]=[O(" 您的作业状态已经提交过了，如果再次提交，将会覆盖之前的作业。 ")])),_:1})):e.value.status==2?(p(),D(n,{key:1},{default:g(()=>c[4]||(c[4]=[O(" 您的作业状态已经完成了批改，如果再次提交，将会覆盖之前的作业，并且成绩会被重置。 ")])),_:1})):e.value.subStatus==2&&e.value.status==0?(p(),D(n,{key:2},{default:g(()=>c[5]||(c[5]=[O(" 没办法咯，您的作业已经过期了，无法再次提交。不过你可以试试,服务器接不接受我就管不着了。 如果实在来不及交作业，建议先提交点什么东西，使用覆盖提交实现作业修改。 ")])),_:1})):S("",!0),m(h),m(i,{type:"primary",onClick:c[1]||(c[1]=$=>r.value=!0)},{default:g(()=>c[6]||(c[6]=[O(" 继续提交 ")])),_:1})]))]),_:1},8,["modelValue","title"])):S("",!0)],64)}}}),Ft=Ne(to,[["__scopeId","data-v-9dfc59a4"]]),ao={class:"a-card"},so={class:"a-card"},oo={style:{width:"100%",height:"fit-content","background-color":"aliceblue"}},lo=["src"],no=["innerHTML"],ro=["href","download"],io=x({__name:"Hwcontent",props:{id:{type:Number,required:!0}},setup(o){const s=be(),e=o,a=I({}),l=I(!1),r=I({}),y=I(!0);return re(async()=>{try{a.value=await Ks(e.id)}catch{await s.checkAuth_ve(),Z({title:"错误",message:"奇怪？怎么找不到作业详情",type:"error"})}finally{y.value=!1}}),(b,c)=>{const k=ge,d=Re,f=De,w=he;return y.value?(p(),C(X,{key:0},[P("div",ao,[m(k,{rows:2,animated:"",class:"skeleton-header"})]),P("div",so,[m(k,{rows:1,animated:"",class:"skeleton-header"}),(p(),C(X,null,Y(2,i=>m(k,{key:i,rows:2,animated:"",class:"homework-skeleton",style:{margin:"12px 0"}})),64))])],64)):(p(),C(X,{key:1},[m(d,{modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=i=>l.value=i),style:{display:"flex","flex-direction":"column","background-color":"antiquewhite"},title:r.value.file_name,fullscreen:"","append-to-body":"","destroy-on-close":""},{default:g(()=>[P("div",oo,[r.value.convert_url!=null?(p(),C("iframe",{key:0,style:{width:"100%",height:"85vh"},src:`/static/pdfjs-5.2.133-dist/web/viewer.html?file=/api/pdf/${r.value.convert_url}`,frameborder:"0"},null,8,lo)):S("",!0)])]),_:1},8,["modelValue","title"]),P("div",{innerHTML:a.value.content},null,8,no),m(f),(p(!0),C(X,null,Y(a.value.FileList,(i,_)=>{var n,h;return p(),C("div",{class:"file",key:_},[P("h3",null,[O("附件"+T(_+1)+":"+T(i.file_name)+" ",1),(n=i.convert_url)!=null&&n.endsWith("docx")||(h=i.convert_url)!=null&&h.endsWith("pdf")?(p(),D(w,{key:0,type:"info",onClick:u=>{l.value=!0,r.value=i},round:""},{default:g(()=>c[2]||(c[2]=[O("预览")])),_:2},1032,["onClick"])):S("",!0),m(w,{type:"primary",onClick:c[1]||(c[1]=()=>{}),round:""},{default:g(()=>[P("a",{href:`/api/pdf/${i.convert_url}`,download:i.file_name,style:{color:"inherit","text-decoration":"none"}}," 下载 ",8,ro)]),_:2},1024)]),m(f)])}),128))],64))}}}),uo={class:"a-card"},co={class:"a-card"},fo={style:{width:"100%",height:"fit-content","background-color":"aliceblue"}},po=["src"],mo=["innerHTML"],vo=["href","download"],yo=x({__name:"HwStucontent",props:{id:{type:Number,required:!0},ipId:{type:Number,required:!0}},setup(o){const s=be(),e=o,a=I({}),l=I(!1),r=I({}),y=I(!0),b=s.userinfo.roleCode.includes("xs")?1:2;return re(async()=>{try{a.value=await Rt(e.id,e.ipId,b)}catch{await s.checkAuth_ve(),Z({title:"错误",message:"奇怪？怎么找不到作业详情",type:"error"})}finally{y.value=!1}}),(c,k)=>{const d=ge,f=Re,w=De,i=he;return y.value?(p(),C(X,{key:0},[P("div",uo,[m(d,{rows:2,animated:"",class:"skeleton-header"})]),P("div",co,[m(d,{rows:1,animated:"",class:"skeleton-header"}),(p(),C(X,null,Y(2,_=>m(d,{key:_,rows:2,animated:"",class:"homework-skeleton",style:{margin:"12px 0"}})),64))])],64)):(p(),C(X,{key:1},[m(f,{modelValue:l.value,"onUpdate:modelValue":k[0]||(k[0]=_=>l.value=_),style:{display:"flex","flex-direction":"column","background-color":"antiquewhite"},title:r.value.file_name,fullscreen:"","append-to-body":"","destroy-on-close":""},{default:g(()=>[P("div",fo,[r.value.convert_url!=null?(p(),C("iframe",{key:0,style:{width:"100%",height:"85vh"},src:`/api/pdf/${r.value.convert_url}`,frameborder:"0"},null,8,po)):S("",!0)])]),_:1},8,["modelValue","title"]),P("div",{innerHTML:a.value.content},null,8,mo),m(w),(p(!0),C(X,null,Y(a.value.FileList,(_,n)=>(p(),C("div",{class:"file",key:n},[P("h3",null,[O("附件"+T(n+1)+":"+T(_.file_name)+" ",1),_.convert_url?(p(),D(i,{key:0,type:"info",onClick:h=>{l.value=!0,r.value=_},round:""},{default:g(()=>k[1]||(k[1]=[O("预览")])),_:2},1032,["onClick"])):S("",!0),m(i,{type:"primary",onClick:()=>{console.log(_.url)},round:""},{default:g(()=>[P("a",{href:_.url,download:_.file_name,style:{color:"inherit","text-decoration":"none"}}," 下载 ",8,vo)]),_:2},1032,["onClick"])]),m(w)]))),128))],64))}}}),ho={key:0},go={key:2},_o=["innerHTML"],bo=["href","download"],wo=["innerHTML"],ko={key:0},$o=["href"],Co=["innerHTML"],So=x({__name:"HwDialog",props:{activehomework:{type:Object,required:!0}},setup(o){var b,c;const e=o.activehomework,a=I("相关信息"),l=I(0),r=I(0);(b=e.detail)!=null&&b.my_homework&&Rt((c=e.detail)==null?void 0:c.my_homework,e.id,1);const y=()=>{if(e.status==2){Ye({type:"error",message:"已批改的作业不能删除!"});return}else if(e.subStatus==2){Ye({type:"error",message:"删了不能补交，不许删！"});return}fa.confirm("确认删除作业?","删除作业",{confirmButtonText:"确定",cancelButtonText:"取消",roundButton:!0,customStyle:{borderRadius:"12px"},type:"warning",icon:pa(wt)}).then(async()=>{var k,d;(k=e.detail)!=null&&k.my_homework&&await Gs((d=e.detail)==null?void 0:d.my_homework),Ee.emit("UPDATE_HOMEWORKS"),Je({title:"删除成功",message:"作业已删除",type:"success",duration:800})}).catch(()=>{Je({title:"提示",message:"取消删除操作",type:"info",duration:800})})};return(k,d)=>{const f=De,w=ka,i=ys,_=he,n=qe,h=Le,u=vs;return p(),D(u,{type:"card",lazy:!0,modelValue:a.value,"onUpdate:modelValue":d[3]||(d[3]=$=>a.value=$),style:{width:"100%",height:"100%",display:"100%","border-radius":"12px"}},{default:g(()=>{var $,v,E,U,A,W,B,N,R,L,j,q,J;return[m(i,{label:"相关信息",name:"相关信息",style:{display:"flex",height:"100%"}},{default:g(()=>[m(w,{height:"100%",style:{width:"100%"}},{default:g(()=>[m(Ft,{activehomework:t(e)},null,8,["activehomework"]),m(f),m(io,{id:t(e).id},null,8,["id"])]),_:1})]),_:1}),t(e).detail&&(($=t(e).detail)!=null&&$.my_homework)?(p(),D(i,{key:0,label:"我的作业",name:"我的作业",class:"scroll-tab-pane"},{default:g(()=>[m(w,{height:"100%",style:{width:"100%"}},{default:g(()=>{var K,z,ue,ce,de,we;return[t(e).status==2?(p(),C("h3",ho,"✒️分数:"+T((K=t(e).detail)==null?void 0:K.score),1)):S("",!0),a.value=="我的作业"?(p(),D(yo,{key:1,id:(z=t(e).detail)==null?void 0:z.my_homework,ipId:t(e).id},null,8,["id","ipId"])):S("",!0),(ue=t(e).detail)!=null&&ue.comment?(p(),C("h3",go,"🧑‍🏫老师评价:"+T(((ce=t(e).detail)==null?void 0:ce.is_excellent)==1?"🤩":""),1)):S("",!0),P("div",{innerHTML:(de=t(e).detail)==null?void 0:de.comment},null,8,_o),(we=t(e).detail)!=null&&we.comment?(p(),D(f,{key:3})):S("",!0),m(h,null,{default:g(()=>[m(n,{span:18},{default:g(()=>[m(_,{type:"primary",onClick:d[0]||(d[0]=()=>{}),style:{width:"95%"},round:""},{default:g(()=>d[4]||(d[4]=[O("修改作业")])),_:1})]),_:1}),m(n,{span:6},{default:g(()=>[m(_,{type:"danger",onClick:y,style:{width:"95%"},round:""},{default:g(()=>d[5]||(d[5]=[O("删除作业")])),_:1})]),_:1})]),_:1})]}),_:1})]),_:1})):S("",!0),(U=(E=(v=t(e))==null?void 0:v.detail)==null?void 0:E.topFive)!=null&&U.length&&((B=(W=(A=t(e))==null?void 0:A.detail)==null?void 0:W.topFive)==null?void 0:B.length)>0?(p(),D(i,{key:1,label:"优秀作业",name:"优秀作业",style:{height:"100%"}},{default:g(()=>[t(e).detail.courseNoteList?(p(),D(u,{key:0,"tab-position":"right",style:{height:"100%"},modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=K=>r.value=K)},{default:g(()=>[(p(!0),C(X,null,Y(t(e).detail.topFive,(K,z)=>(p(),D(i,{style:{height:"100%"},label:`${t(e).detail.courseNoteList[z].stu_name}`,name:z},{default:g(()=>[m(w,{height:"100%",style:{width:"100%"}},{default:g(()=>[P("h3",null,[O("✒️分数:"+T(t(e).detail.courseNoteList[z].score)+" 🪜排名:"+T(z+1)+"/"+T(t(e).submitCount),1),d[6]||(d[6]=P("br",null,null,-1))]),P("a",{href:`api/downloadZyFj.shtml?path=&filename=${t(e).detail.courseNoteList[z].stu_name}&id=${t(e).detail.courseNoteList[z].id}`,download:t(e).detail.courseNoteList[z].stu_id,style:{color:"inherit","text-decoration":"none"}}," 下载(不知道会下到谁的作业) ",8,bo),P("h3",null,"🧑‍🏫老师评价:"+T(t(e).detail.courseNoteList[z].is_excellent=="1"?"🤩":""),1),P("div",{innerHTML:t(e).detail.courseNoteList[z].content},null,8,wo)]),_:2},1024)]),_:2},1032,["label","name"]))),256))]),_:1},8,["modelValue"])):S("",!0)]),_:1})):S("",!0),(L=(R=(N=t(e))==null?void 0:N.detail)==null?void 0:R.courseNoteList)!=null&&L.length&&((J=(q=(j=t(e))==null?void 0:j.detail)==null?void 0:q.courseNoteList)==null?void 0:J.length)>0?(p(),D(i,{key:2,label:"其他人",name:"其他人",style:{height:"100%"}},{default:g(()=>[t(e).detail.courseNoteList&&a.value=="其他人"?(p(),D(u,{key:0,"tab-position":"right",style:{height:"100%"},modelValue:l.value,"onUpdate:modelValue":d[2]||(d[2]=K=>l.value=K)},{default:g(()=>[(p(!0),C(X,null,Y(t(e).detail.courseNoteList,(K,z)=>(p(),D(i,{label:`${K.stu_name}`,style:{height:"100%"},name:z},{default:g(()=>[m(w,{height:"100%",style:{width:"100%"}},{default:g(()=>[t(e).detail.courseNoteList[z].score?(p(),C("h3",ko,[O("✒️分数:"+T(t(e).detail.courseNoteList[z].score)+"; "+T(z+1)+"/"+T(t(e).submitCount),1),d[7]||(d[7]=P("br",null,null,-1))])):S("",!0),P("a",{href:`api/back/coursePlatform/homeWork.shtml?method=batchDownloadWorks&id=${t(e).id}`},"下载所有人作业",8,$o),P("h3",null,"🧑‍🏫老师评价:"+T(K.is_excellent=="1"?"🤩":""),1),P("div",{innerHTML:K.content},null,8,Co)]),_:2},1024)]),_:2},1032,["label","name"]))),256))]),_:1},8,["modelValue"])):S("",!0)]),_:1})):S("",!0)]}),_:1},8,["modelValue"])}}}),To=Ne(So,[["__scopeId","data-v-ce05faf0"]]),Eo={key:0,class:"a-card-static",style:{flex:"1"}},No={key:1,class:"a-card-static"},Lo={key:1,class:"a-card hwitem"},Po=x({__name:"HomeWorkModule",setup(o){var _;const s=be(),e=I(null),a=I(!1),l=I(!1);(!(s!=null&&s.homeworkList)||((_=s.homeworkList)==null?void 0:_.length)==0)&&(l.value=!0);const r=n=>n.filter(h=>h.status===0&&h.subStatus===0).length,y=n=>n.filter(h=>h.status===0&&h.subStatus===2).length,b=n=>n.filter(h=>h.status===0&&h.subStatus===1).length,c=H(()=>[...s.homeworkList].sort((n,h)=>{const u=n.status===0,$=h.status===0,v=u&&n.subStatus===1,E=$&&h.subStatus===1,U=u&&n.subStatus===0,A=$&&h.subStatus===0,W=!u||n.subStatus===2,B=!$||h.subStatus===2;if(v!==E)return v?-1:1;if(v){const N=n.makeup_time?new Date(n.makeup_time).getTime():1/0,R=h.makeup_time?new Date(h.makeup_time).getTime():1/0;return N-R}if(U!==A)return U?-1:1;if(U){const N=new Date(n.end_time).getTime(),R=new Date(h.end_time).getTime();return N-R}if(W!==B)return W?1:-1;if(W){const N=new Date(n.create_date).getTime();return new Date(h.create_date).getTime()-N}return 0}).filter(n=>n.status==0&&n.subStatus!=2)),k=H(()=>{const n={0:{courseName:"待办作业",items:c.value}};return s.homeworkList.reduce((h,u)=>{const $=u.course_name;return h[u.course_id]||(h[u.course_id]={courseName:$,items:[]}),h[u.course_id].items.push(u),h},n)}),d=n=>{e.value=n,a.value=!0},f=async()=>{var n;if(await s.checkAuth_ve())try{if(s.courseList.length===0)return;(!(s!=null&&s.homeworkList)||((n=s.homeworkList)==null?void 0:n.length)==0)&&(l.value=!0);const h=await Ws(s.courseList.map(u=>u.id));s.homeworkList=h,Z({title:"作业信息更新",message:`${new Date().toLocaleString()}`,type:"success",showClose:!0,duration:1e3})}catch(h){Z({title:"作业加载失败",message:`${h}`,type:"error",showClose:!0,duration:0})}finally{l.value=!1}},w=async()=>{var n;if(await s.checkAuth_ve())try{if(s.courseList.length===0){Z({title:"",message:"无课程信息",type:"warning",showClose:!0,duration:1e3});return}for(const h of s.homeworkList){const u=(await qs(h.id)).sort((v,E)=>{const U=v.score,A=E.score;return U===null?1:A===null?-1:A-U});h.detail={my_homework:(n=h.detail)==null?void 0:n.my_homework,courseNoteList:u,topFive:u.filter(v=>v.pgFlag!=="s").slice(0,5).map(v=>v.id)};const $=u.filter(v=>v.pgFlag!=="s").find(v=>{var E;return v.id==((E=h.detail)==null?void 0:E.my_homework)});$&&(h.status=2,h.detail.score=Number($.score),h.detail.rank=u.filter(v=>v.pgFlag!=="s").findIndex(v=>{var E;return v.id==((E=h.detail)==null?void 0:E.my_homework)})+1,h.detail.is_excellent=Number($.is_excellent),h.detail.average_score=u.filter(v=>v.pgFlag!=="s").map(v=>Number(v.score)).reduce((v,E)=>v+E,0)/u.filter(v=>v.pgFlag!=="s").length,h.detail.comment=$.content)}Z({title:"作业细节更新",message:`${new Date().toLocaleString()}`,type:"success",showClose:!0,duration:1e3})}catch(h){Z({title:"作业细节加载失败",message:`${h}`,type:"error",showClose:!0,duration:800})}finally{}},i=I("0");return Ee.on("UPDATE_HOMEWORKS",()=>{try{l.value=!0,s.homeworkList=[],a.value=!1,s.addTaskToQueue(f),s.addTaskToQueue(w)}catch(n){console.error("获取作业列表失败:",n)}}),re(()=>{try{s.addTaskToQueue(f),s.addTaskToQueue(w)}catch(n){console.error("获取作业列表失败:",n)}}),(n,h)=>{const u=ge,$=Pe,v=je,E=We,U=Le,A=va,W=ma,B=Re;return p(),C(X,null,[l.value?(p(),C("div",Eo,[m(u,{rows:1,animated:"",class:"skeleton-header"}),(p(),C(X,null,Y(3,N=>m(u,{key:N,rows:2,animated:"",class:"homework-skeleton",style:{margin:"12px 0"}})),64))])):(p(),C("div",No,[m(v,{wrap:"",size:5},{default:g(()=>[b(t(s).homeworkList)?(p(),D($,{key:0,type:"warning",round:""},{default:g(()=>[O(T(b(t(s).homeworkList))+"项待补交",1)]),_:1})):S("",!0),m($,{type:"warning",round:""},{default:g(()=>[O(T(r(t(s).homeworkList))+"项待完成",1)]),_:1}),y(t(s).homeworkList)?(p(),D($,{key:1,type:"danger",round:""},{default:g(()=>[O(T(y(t(s).homeworkList))+"项过期",1)]),_:1})):S("",!0),m($,{type:"info",round:""},{default:g(()=>[O("共"+T(t(s).homeworkList.length)+"项",1)]),_:1})]),_:1}),m(W,{modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=N=>i.value=N),accordion:""},{default:g(()=>[(p(!0),C(X,null,Y(k.value,(N,R)=>(p(),D(A,{key:R,name:R,class:"a-card"},{title:g(()=>[m(v,{wrap:""},{default:g(()=>[m(E,null,{default:g(()=>[O(T(N.courseName),1)]),_:2},1024),m(v,{size:2},{default:g(()=>[b(N.items)?(p(),D($,{key:0,type:"warning",round:""},{default:g(()=>[O(T(b(N.items))+"项待补交",1)]),_:2},1024)):S("",!0),r(N.items)?(p(),D($,{key:1,type:"warning",round:""},{default:g(()=>[O(T(r(N.items))+"项待完成",1)]),_:2},1024)):S("",!0),y(N.items)?(p(),D($,{key:2,type:"danger",round:""},{default:g(()=>[O(T(y(N.items))+"项过期",1)]),_:2},1024)):S("",!0),m($,{type:"info",round:""},{default:g(()=>[O("共"+T(N.items.length)+"项",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),default:g(()=>[i.value==R?(p(!0),C(X,{key:0},Y(N.items,L=>(p(),D(U,{key:L.id,class:"a-card hwitem",gutter:12,onClick:j=>d(L)},{default:g(()=>[m(Ft,{activehomework:L},null,8,["activehomework"])]),_:2},1032,["onClick"]))),128)):(p(),C("div",Lo,[N.items.length>0?(p(),D(u,{key:0,rows:N.items.length*3,animated:"",class:"skeleton-header"},null,8,["rows"])):(p(),D(u,{key:1,rows:1,animated:"",class:"skeleton-header"}))]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])),e.value?(p(),D(B,{key:2,modelValue:a.value,"onUpdate:modelValue":h[1]||(h[1]=N=>a.value=N),title:e.value.title,style:{"flex-direction":"column",display:"flex",overflow:"hidden"},fullscreen:"","destroy-on-close":"","body-class":"full-dialog-body","header-class":"full-dialog-header"},{default:g(()=>[m(To,{activehomework:e.value},null,8,["activehomework"])]),_:1},8,["modelValue","title"])):S("",!0)],64)}}}),Do=Ne(Po,[["__scopeId","data-v-9a62faba"]]),Ro={key:0,class:"a-card-static"},Fo={key:1,class:"a-card"},Io={class:"title"},Oo=x({__name:"CourseScheduleItemPanel",props:{coursescheduleitem:{type:Object,required:!0}},setup(o){const s=o,e=I(!0),a=s.coursescheduleitem,l=new Date>new Date(a.classEndTime),r=!l&&new Date>=new Date(a.classBeginTime),y=b=>new Date(b).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"});return re(()=>{e.value=!1}),(b,c)=>{const k=ge,d=qe,f=Pe,w=Ct,i=je,_=he,n=Le;return e.value?(p(),C("div",Ro,[m(k,{rows:2,animated:"",class:"skeleton-header"})])):(p(),C("div",Fo,[m(d,{class:"type"},{default:g(()=>[O(T(t(a).courseType)+" "+T(t(a).teachTime)+" "+T(t(a).weekDay),1)]),_:1}),m(n,null,{default:g(()=>[m(d,{xs:24,sm:18,md:18},{default:g(()=>[P("h3",Io,[O(T(t(a).courseName),1),t(r)?(p(),D(f,{key:0,type:"warning"},{default:g(()=>c[1]||(c[1]=[O("上课中")])),_:1})):S("",!0)]),m(i,{wrap:""},{default:g(()=>[m(f,{type:"info"},{default:g(()=>[O("🏫"+T(t(a).classroomName),1)]),_:1}),m(f,{type:"info"},{default:g(()=>[O("⏱️"+T(y(t(a).classBeginTime))+" - "+T(y(t(a).classEndTime)),1)]),_:1}),m(f,{type:"info"},{default:g(()=>[O("🕵️‍♂️"+T(t(a).teacherName),1)]),_:1}),l?S("",!0):(p(),D(f,{key:0,type:"warning"},{default:g(()=>[m(w,{"value-style":"color: #b4b9be; font-size: 14px; font-weight: 700; display:flex ; ",format:`[⏳${t(r)?"距离结束还有":"距离开始还有"}]HH:mm:ss`,value:new Date(t(r)?t(a).classEndTime:t(a).classBeginTime).getTime()},null,8,["format","value"])]),_:1}))]),_:1})]),_:1}),m(d,{xs:24,sm:6,md:6},{default:g(()=>[m(_,{round:"",style:{width:"100%"},class:"a-card",onClick:c[0]||(c[0]=()=>{}),type:t(r)?"warning":"info"},{default:g(()=>[O(T(t(r)?"直播":"预习"),1)]),_:1},8,["type"])]),_:1})]),_:1})]))}}}),Uo=Ne(Oo,[["__scopeId","data-v-3f582cdb"]]),Ao={key:0,class:"a-card-static",style:{flex:"1"}},Bo={key:1,class:"a-card-static"},Ho={key:0,class:"a-card"},Mo=x({__name:"DayCourseModule",setup(o){const s=be(),e=I(!0),a=I(),l=y=>[y.getFullYear(),(y.getMonth()+1).toString().padStart(2,"0"),y.getDate().toString().padStart(2,"0")].join(""),r=H(()=>{var y;return((y=a.value)==null?void 0:y.filter(b=>new Date<=new Date(b.classEndTime)))||[]});return re(async()=>{try{const y=s.Cache.DayCourse_time?new Date(JSON.parse(s.Cache.DayCourse_time)):null,b=y&&l(y)===l(new Date);if(!s.Cache.DayCourse||!y||!b){const c=await Ms(l(new Date));s.Cache.DayCourse=JSON.stringify(c),s.Cache.DayCourse_time=JSON.stringify(new Date),a.value=c,Z({title:"今日课表",message:`${new Date().toLocaleString()},今日共${c.length}节`,type:"success"})}else a.value=JSON.parse(s.Cache.DayCourse)||[];a.value&&(a.value=a.value.reduce((c,k)=>{const d=c.find(f=>f.classroomName===k.classroomName&&f.classBeginTime===k.classBeginTime&&f.classEndTime===k.classEndTime&&f.teachTime===k.teachTime);return d?(d.teacherName+=` ${k.teacherName}`,d.teacherId+=` ${k.teacherId}`,d.teacherAcademy+=` ${k.teacherAcademy}`):c.push(k),c},[]))}finally{e.value=!1}}),(y,b)=>{const c=ge,k=Pe,d=We;return e.value?(p(),C("div",Ao,[m(c,{rows:1,animated:"",class:"skeleton-header"}),(p(),C(X,null,Y(3,f=>m(c,{key:f,rows:2,animated:"",class:"homework-skeleton",style:{margin:"12px 0"}})),64))])):(p(),C("div",Bo,[m(k,{type:"info"},{default:g(()=>{var f,w;return[O(T((f=a.value)!=null&&f.length?`今日共${(w=a.value)==null?void 0:w.length}节`:"今日无课"),1)]}),_:1}),b[2]||(b[2]=O("  ")),m(k,{type:"danger"},{default:g(()=>[O("剩余"+T(r.value.length)+"节",1)]),_:1}),b[3]||(b[3]=O("  ")),(p(!0),C(X,null,Y(r.value,f=>(p(),D(Uo,{coursescheduleitem:f},null,8,["coursescheduleitem"]))),256)),r.value.length==0?(p(),C("div",Ho,[m(d,null,{default:g(()=>b[0]||(b[0]=[O("没课啦(*￣3￣)╭")])),_:1}),b[1]||(b[1]=P("h4",null,"美好的一天从没课开始...",-1))])):S("",!0)]))}}}),xo={style:{display:"flex","flex-direction":"column",gap:"6px",flex:"1","max-width":"985px",width:"100%"}},Vo={class:"a-card-static"},al=x({__name:"HomeSpace",setup(o){const s=be();return(e,a)=>(p(),C("div",xo,[P("div",Vo,[m(ya)]),m(dt,{name:"el-fade-in"},{default:g(()=>[P("div",null,[t(s).status_app?(p(),D(Mo,{key:0})):S("",!0)])]),_:1}),P("div",null,[m(Do)])]))}});export{al as default};
